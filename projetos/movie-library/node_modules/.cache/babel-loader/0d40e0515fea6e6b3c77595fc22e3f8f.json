{"ast":null,"code":"import _regeneratorRuntime from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import*as movieAPI from'../services/movieAPI';import{Loading}from'../components';var MovieDetails=/*#__PURE__*/function(_Component){_inherits(MovieDetails,_Component);var _super=_createSuper(MovieDetails);function MovieDetails(){var _this;_classCallCheck(this,MovieDetails);_this=_super.call(this);_this.state={loading:true,movie:{}};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(MovieDetails,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.props.match.params.id;movieAPI.getMovie(id).then(function(response){return _this2.setState({loading:false,movie:response});});}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=this.props.match.params.id;_context.next=3;return movieAPI.deleteMovie(id);case 3:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){// Change the condition to check the state\n// if (true) return <Loading />;\nvar _this$state=this.state,movie=_this$state.movie,loading=_this$state.loading;var title=movie.title,storyline=movie.storyline,imagePath=movie.imagePath,genre=movie.genre,rating=movie.rating,subtitle=movie.subtitle,id=movie.id;var srcImg='';if(loading)return/*#__PURE__*/React.createElement(Loading,null);if(imagePath.substring(0,7)==='images/'){srcImg=\"../\".concat(imagePath);}else{srcImg=imagePath;}return/*#__PURE__*/React.createElement(\"div\",{\"data-testid\":\"movie-details\",className:\"movie-details-body\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"section\",{className:\"movie-details\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"Movie Cover\",src:srcImg,className:\"movie-card-image\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"movie-card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title-details\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"movie-card-title\"},\"Title: \".concat(title))),/*#__PURE__*/React.createElement(\"p\",{className:\"movie-card-subtitle\"},\"Subtitle: \".concat(subtitle)),/*#__PURE__*/React.createElement(\"p\",{className:\"movie-card-storyline\"},\"Storyline: \".concat(storyline)),/*#__PURE__*/React.createElement(\"p\",null,\"Genre: \".concat(genre))),/*#__PURE__*/React.createElement(\"div\",{className:\"movie-card-rating\"},/*#__PURE__*/React.createElement(\"p\",{className:\"rating\"},\"Rating: \".concat(rating)))),/*#__PURE__*/React.createElement(\"section\",{className:\"links\"},/*#__PURE__*/React.createElement(Link,{className:\"default-link\",to:\"\".concat(id,\"/edit\")},\"EDITAR\"),/*#__PURE__*/React.createElement(Link,{className:\"default-link\",to:'/'},\"VOLTAR\"),/*#__PURE__*/React.createElement(Link,{className:\"default-link\",to:'/',onClick:this.handleSubmit},\"DELETAR\"))));}}]);return MovieDetails;}(Component);export default MovieDetails;","map":{"version":3,"sources":["/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/src/pages/MovieDetails.js"],"names":["React","Component","Link","movieAPI","Loading","MovieDetails","state","loading","movie","handleSubmit","bind","id","props","match","params","getMovie","then","response","setState","deleteMovie","title","storyline","imagePath","genre","rating","subtitle","srcImg","substring"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport * as movieAPI from '../services/movieAPI';\nimport { Loading } from '../components';\n\n\nclass MovieDetails extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: true,\n      movie: {},\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    movieAPI.getMovie(id)\n    .then((response) => this.setState({\n      loading: false,\n      movie: response,\n    }));\n  }\n\n  async handleSubmit() {\n    const { id } = this.props.match.params;\n    await movieAPI.deleteMovie(id);\n  }\n\n  render() {\n    // Change the condition to check the state\n    // if (true) return <Loading />;\n\n    const { movie, loading } = this.state;\n    const { title, storyline, imagePath, genre, rating, subtitle, id } = movie;\n    let srcImg = '';\n\n    if (loading) return <Loading />;\n\n    if (imagePath.substring(0, 7) === 'images/') {\n      srcImg = `../${imagePath}`;\n    } else {\n      srcImg = imagePath;\n    }\n\n    return (\n      <div data-testid=\"movie-details\" className=\"movie-details-body\">\n        <div>\n          <section className=\"movie-details\">\n            <img alt=\"Movie Cover\" src={srcImg} className=\"movie-card-image\" />\n            <div className=\"movie-card-body\">\n              <div className=\"title-details\">\n                <h2 className=\"movie-card-title\">{`Title: ${title}`}</h2>\n              </div>\n              <p className=\"movie-card-subtitle\">{`Subtitle: ${subtitle}`}</p>\n              <p className=\"movie-card-storyline\">{`Storyline: ${storyline}`}</p>\n              <p>{`Genre: ${genre}`}</p>\n            </div>\n            <div className=\"movie-card-rating\">\n              <p className=\"rating\">{`Rating: ${rating}`}</p>\n            </div>\n          </section>\n          <section className=\"links\">\n            <Link className=\"default-link\" to={`${id}/edit`}>EDITAR</Link>\n            <Link className=\"default-link\" to={'/'}>VOLTAR</Link>\n            <Link className=\"default-link\" to={'/'} onClick={this.handleSubmit}>DELETAR</Link>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\nMovieDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default MovieDetails;\n"]},"metadata":{},"sourceType":"module"}