{"ast":null,"code":"import _regeneratorRuntime from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect,Link}from'react-router-dom';import{MovieForm,Loading}from'../components';import*as movieAPI from'../services/movieAPI';var EditMovie=/*#__PURE__*/function(_Component){_inherits(EditMovie,_Component);var _super=_createSuper(EditMovie);function EditMovie(props){var _this;_classCallCheck(this,EditMovie);_this=_super.call(this,props);_this.state={};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.state={status:'loading',shouldRedirect:false,movie:{}};return _this;}_createClass(EditMovie,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.props.match.params.id;movieAPI.getMovie(id).then(function(response){return _this2.setState({status:'loaded',movie:response});});}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(updatedMovie){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return movieAPI.updateMovie(updatedMovie);case 2:this.setState({shouldRedirect:true});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){var _this$state=this.state,status=_this$state.status,shouldRedirect=_this$state.shouldRedirect,movie=_this$state.movie;if(shouldRedirect){// Redirect\nreturn/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/\"});}if(status==='loading'){// render Loading\nreturn/*#__PURE__*/React.createElement(Loading,null);}return/*#__PURE__*/React.createElement(\"div\",{\"data-testid\":\"edit-movie\"},/*#__PURE__*/React.createElement(MovieForm,{movie:movie,onSubmit:this.handleSubmit}),/*#__PURE__*/React.createElement(\"div\",{className:\"links\"},/*#__PURE__*/React.createElement(Link,{className:\"default-link\",to:\"/\"},\"VOLTAR\")));}}]);return EditMovie;}(Component);export default EditMovie;","map":{"version":3,"sources":["/home/dehsartoreto/Trybe/fixsartoreto.github.io/projetos/movie-library/src/pages/EditMovie.js"],"names":["React","Component","Redirect","Link","MovieForm","Loading","movieAPI","EditMovie","props","state","handleSubmit","bind","status","shouldRedirect","movie","id","match","params","getMovie","then","response","setState","updatedMovie","updateMovie"],"mappings":"wyCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,CAAmBC,IAAnB,KAA+B,kBAA/B,CAEA,OAASC,SAAT,CAAoBC,OAApB,KAAmC,eAAnC,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,sBAA1B,C,GAEMC,CAAAA,S,sGACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,EAAb,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CAEA,MAAKF,KAAL,CAAa,CACXG,MAAM,CAAE,SADG,CAEXC,cAAc,CAAE,KAFL,CAGXC,KAAK,CAAE,EAHI,CAAb,CALiB,aAUlB,C,mFAEmB,oBACVC,CAAAA,EADU,CACH,KAAKP,KAAL,CAAWQ,KAAX,CAAiBC,MADd,CACVF,EADU,CAElBT,QAAQ,CAACY,QAAT,CAAkBH,EAAlB,EACCI,IADD,CACM,SAACC,QAAD,QAAc,CAAA,MAAI,CAACC,QAAL,CAAc,CAChCT,MAAM,CAAE,QADwB,CAEhCE,KAAK,CAAEM,QAFyB,CAAd,CAAd,EADN,EAKD,C,kIAEkBE,Y,wIACXhB,CAAAA,QAAQ,CAACiB,WAAT,CAAqBD,YAArB,C,QACN,KAAKD,QAAL,CAAc,CAAER,cAAc,CAAE,IAAlB,CAAd,E,kMAGO,iBACmC,KAAKJ,KADxC,CACCG,MADD,aACCA,MADD,CACSC,cADT,aACSA,cADT,CACyBC,KADzB,aACyBA,KADzB,CAEP,GAAID,cAAJ,CAAoB,CAClB;AACA,mBAAO,oBAAC,QAAD,EAAU,IAAI,KAAd,CAAe,EAAE,CAAC,GAAlB,EAAP,CACD,CAED,GAAID,MAAM,GAAK,SAAf,CAA0B,CACxB;AACA,mBAAO,oBAAC,OAAD,MAAP,CACD,CAED,mBACE,2BAAK,cAAY,YAAjB,eACE,oBAAC,SAAD,EAAW,KAAK,CAAEE,KAAlB,CAAyB,QAAQ,CAAE,KAAKJ,YAAxC,EADF,cAEE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,cAAhB,CAA+B,EAAE,CAAC,GAAlC,WADF,CAFF,CADF,CAQD,C,uBA/CqBT,S,EA0DxB,cAAeM,CAAAA,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { MovieForm, Loading } from '../components';\nimport * as movieAPI from '../services/movieAPI';\n\nclass EditMovie extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n    this.state = {\n      status: 'loading',\n      shouldRedirect: false,\n      movie: {},\n    };\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    movieAPI.getMovie(id)\n    .then((response) => this.setState({\n      status: 'loaded',\n      movie: response,\n    }));\n  }\n\n  async handleSubmit(updatedMovie) {\n    await movieAPI.updateMovie(updatedMovie);\n    this.setState({ shouldRedirect: true });\n  }\n\n  render() {\n    const { status, shouldRedirect, movie } = this.state;\n    if (shouldRedirect) {\n      // Redirect\n      return <Redirect push to=\"/\" />;\n    }\n\n    if (status === 'loading') {\n      // render Loading\n      return <Loading />;\n    }\n\n    return (\n      <div data-testid=\"edit-movie\">\n        <MovieForm movie={movie} onSubmit={this.handleSubmit} />\n        <div className=\"links\">\n          <Link className=\"default-link\" to=\"/\">VOLTAR</Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nEditMovie.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default EditMovie;\n"]},"metadata":{},"sourceType":"module"}